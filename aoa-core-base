FROM openjdk:17-alpine

RUN apk update
RUN apk add --no-cache \
    python3 \
    py3-pip \
    python3-dev \
    build-base \
    make \
    bash \
    curl \
    openssh-client \
    vim \
    bc \
    jq \
    docker \
    libffi-dev \
    cargo \
    openssl-dev

RUN rm -f /usr/bin/python && ln -s /usr/bin/python3 /usr/bin/python
RUN rm -f /usr/bin/pip && ln -s /usr/bin/pip3 /usr/bin/pip

ENV CRYPTOGRAPHY_DONT_BUILD_RUST=1

RUN pip install --no-cache-dir setuptools_rust= Jinja2==3.1.2 s3cmd==2.2.0 aoa

RUN apk del openssl-dev libffi-dev cargo rust build-base python3-dev
